prefix  = @ac_prefix@
qmake   = @ac_qmake@

name    = qxgedit

target  = src/$(name)

headers = \
	src/config.h \
	src/XGParam.h \
	src/XGParamObserver.h \
	src/XGParamWidget.h \
	src/XGParamSysex.h \
	src/qxgeditXGMasterMap.h \
	src/qxgeditAbout.h \
	src/qxgeditAmpEg.h \
	src/qxgeditCheck.h \
	src/qxgeditCombo.h \
	src/qxgeditDrop.h \
	src/qxgeditDrumEg.h \
	src/qxgeditDial.h \
	src/qxgeditEdit.h \
	src/qxgeditFilter.h \
	src/qxgeditKnob.h \
	src/qxgeditPartEg.h \
	src/qxgeditPitch.h \
	src/qxgeditScale.h \
	src/qxgeditSpin.h \
	src/qxgeditUserEg.h \
	src/qxgeditVibra.h \
	src/qxgeditMidiDevice.h \
	src/qxgeditOptions.h \
	src/qxgeditOptionsForm.h \
	src/qxgeditMainForm.h

sources = \
	src/XGParam.cpp \
	src/XGParamObserver.cpp \
	src/XGParamWidget.cpp \
	src/XGParamSysex.cpp \
	src/qxgeditXGMasterMap.cpp \
	src/qxgeditAmpEg.cpp \
	src/qxgeditCheck.cpp \
	src/qxgeditCombo.cpp \
	src/qxgeditDial.cpp \
	src/qxgeditDrop.cpp \
	src/qxgeditDrumEg.cpp \
	src/qxgeditEdit.cpp \
	src/qxgeditFilter.cpp \
	src/qxgeditKnob.cpp \
	src/qxgeditPartEg.cpp \
	src/qxgeditPitch.cpp \
	src/qxgeditScale.cpp \
	src/qxgeditSpin.cpp \
	src/qxgeditUserEg.cpp \
	src/qxgeditVibra.cpp \
	src/qxgeditMidiDevice.cpp \
	src/qxgeditOptions.cpp \
	src/qxgeditOptionsForm.cpp \
	src/qxgeditMainForm.cpp \
	src/qxgedit.cpp

forms = \
	src/qxgeditOptionsForm.ui \
	src/qxgeditMainForm.ui

resources = \
	src/qxgedit.qrc

style_name = skulpture/skulpture

style_target = styles/libskulpturestyle.so

style_headers = \
	skulpture/sk_effects.h \
	skulpture/sk_factory.h \
	skulpture/skulpture_p.h \
	skulpture/skulpture.h

style_sources = \
	skulpture/skulpture.cpp


all:	$(target) $(style_target)


$(target):	$(name).mak $(resources) ${forms} $(sources) $(headers)
	@make -f $(name).mak

$(name).mak:	$(name).pro
	@$(qmake) -o $(name).mak $(name).pro


$(style_target):	$(style_name).mak $(style_sources) $(style_headers)
	@cd skulpture && make -f ../$(style_name).mak

$(style_name).mak:	$(style_name).pro
	@$(qmake) -o $(style_name).mak $(style_name).pro


install:	$(target) $(style_target)
	@make -f $(name).mak install
	@install -d -v -m 0755 $(DESTDIR)$(prefix)/bin/styles
	@install -v -m 0755 $(style_target) $(DESTDIR)$(prefix)/bin/$(style_target)

uninstall:	$(DESTDIR)$(prefix)/bin/$(name)
	@make -f $(name).mak uninstall
	@rm -vf $(DESTDIR)$(prefix)/bin/$(style_target)


clean:	$(name).mak
	@make -f $(name).mak clean
	@rm -f $(target) $(target).mak $(name).mak
	@rm -rf *.cache *.log *.status
	@cd skulpture && make -f ../$(style_name).mak clean
	@rm -f $(style_target) $(style_name).mak
