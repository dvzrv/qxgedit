prefix  = @ac_prefix@
qmake   = @ac_qmake@

name    = qxgedit

headers = \
	src/XGParam.h \
	src/qxgeditAbout.h \
	src/qxgeditAmpEg.h \
	src/qxgeditDial.h \
	src/qxgeditFilter.h \
	src/qxgeditKnob.h \
	src/qxgeditPitch.h \
	src/qxgeditSpin.h \
	src/qxgeditVibra.h \
	src/qxgeditOptions.h \
	src/qxgeditOptionsForm.h \
	src/qxgeditMainForm.h \
	config.h

sources = \
	src/XGParam.cpp \
	src/qxgeditAmpEg.cpp \
	src/qxgeditDial.cpp \
	src/qxgeditFilter.cpp \
	src/qxgeditKnob.cpp \
	src/qxgeditPitch.cpp \
	src/qxgeditSpin.cpp \
	src/qxgeditVibra.cpp \
	src/qxgeditOptions.cpp \
	src/qxgeditOptionsForm.cpp \
	src/qxgeditMainForm.cpp \
	src/main.cpp

forms = \
	src/qxgeditOptionsForm.ui \
	src/qxgeditMainForm.ui

all:	$(name)

$(name).mak:	$(name).pro
	@$(qmake) -o $(name).mak $(name).pro

$(name):	$(name).mak ${forms} $(sources) $(headers)
	@make -f $(name).mak

install:	$(name) icons/$(name).png
	@install -d -v -m 0755 $(DESTDIR)$(prefix)/bin
	@install -d -v -m 0755 $(DESTDIR)$(prefix)/share/pixmaps
	@install -d -v -m 0755 $(DESTDIR)$(prefix)/share/applications
	@install -v -m 0755 $(name) $(DESTDIR)$(prefix)/bin/$(name)
	@install -v -m 0644 icons/$(name).png $(DESTDIR)$(prefix)/share/pixmaps/$(name).png
	@install -v -m 0644 $(name).desktop $(DESTDIR)$(prefix)/share/applications/$(name).desktop

uninstall:	$(DESTDIR)$(prefix)/bin/$(name)
	@rm -vf $(DESTDIR)$(prefix)/bin/$(name)
	@rm -vf $(DESTDIR)$(prefix)/share/pixmaps/$(name).png
	@rm -vf $(DESTDIR)$(prefix)/share/applications/$(name).desktop

clean:	$(name).mak
	@make -f $(name).mak clean
	@rm -f $(name) $(name).mak
	@rm -rf *.cache *.log *.status
